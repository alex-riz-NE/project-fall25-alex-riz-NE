import*as Z from"../brace-expansion@2.0.2/index.js";function T(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function J(r){return r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}const K=typeof process=="object"&&process&&process.platform==="win32";var B=K?{sep:"\\"}:{sep:"/"};T(B);var ee=J(Z);const b=L=(r,e,n={})=>($(e),!n.nocomment&&e.charAt(0)==="#"?!1:new A(e,n).match(r));var L=b;const R=B;b.sep=R.sep;const w=Symbol("globstar **");b.GLOBSTAR=w;const te=ee,D={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},N="[^/]",_=N+"*?",se="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",re="(?:(?!(?:\\/|^)\\.).)*?",F=r=>r.split("").reduce((e,n)=>(e[n]=!0,e),{}),G=F("().*{}+?[]^$\\!"),ne=F("[.("),I=/\/+/;b.filter=(r,e={})=>(n,s,t)=>b(n,r,e);const O=(r,e={})=>{const n={};return Object.keys(r).forEach(s=>n[s]=r[s]),Object.keys(e).forEach(s=>n[s]=e[s]),n};b.defaults=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return b;const e=b,n=(s,t,a)=>e(s,t,O(r,a));return n.Minimatch=class extends e.Minimatch{constructor(s,t){super(s,O(r,t))}},n.Minimatch.defaults=s=>e.defaults(O(r,s)).Minimatch,n.filter=(s,t)=>e.filter(s,O(r,t)),n.defaults=s=>e.defaults(O(r,s)),n.makeRe=(s,t)=>e.makeRe(s,O(r,t)),n.braceExpand=(s,t)=>e.braceExpand(s,O(r,t)),n.match=(s,t,a)=>e.match(s,t,O(r,a)),n},b.braceExpand=(r,e)=>U(r,e);const U=(r,e={})=>($(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:te(r)),ae=1024*64,$=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>ae)throw new TypeError("pattern is too long")},M=Symbol("subparse");b.makeRe=(r,e)=>new A(r,e||{}).makeRe(),b.match=(r,e,n={})=>{const s=new A(e,n);return r=r.filter(t=>s.match(t)),s.options.nonull&&!r.length&&r.push(e),r};const ie=r=>r.replace(/\\(.)/g,"$1"),oe=r=>r.replace(/\\([^-\]])/g,"$1"),he=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ce=r=>r.replace(/[[\]\\]/g,"\\$&");class A{constructor(e,n){$(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){const e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let s=this.globSet=this.braceExpand();n.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,s),s=this.globParts=s.map(t=>t.split(I)),this.debug(this.pattern,s),s=s.map((t,a,i)=>t.map(this.parse,this)),this.debug(this.pattern,s),s=s.filter(t=>t.indexOf(!1)===-1),this.debug(this.pattern,s),this.set=s}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let n=!1,s=0;for(let t=0;t<e.length&&e.charAt(t)==="!";t++)n=!n,s++;s&&(this.pattern=e.slice(s)),this.negate=n}matchOne(e,n,s){var t=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var a=0,i=0,o=e.length,l=n.length;a<o&&i<l;a++,i++){this.debug("matchOne loop");var p=n[i],f=e[a];if(this.debug(n,p,f),p===!1)return!1;if(p===w){this.debug("GLOBSTAR",[n,p,f]);var d=a,m=i+1;if(m===l){for(this.debug("** at the end");a<o;a++)if(e[a]==="."||e[a]===".."||!t.dot&&e[a].charAt(0)===".")return!1;return!0}for(;d<o;){var y=e[d];if(this.debug(`
globstar while`,e,d,n,m,y),this.matchOne(e.slice(d),n.slice(m),s))return this.debug("globstar found match!",d,o,y),!0;if(y==="."||y===".."||!t.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,d,n,m);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(s&&(this.debug(`
>>> no match, partial?`,e,d,n,m),d===o))}var u;if(typeof p=="string"?(u=f===p,this.debug("string match",p,f,u)):(u=f.match(p),this.debug("pattern match",p,f,u)),!u)return!1}if(a===o&&i===l)return!0;if(a===o)return s;if(i===l)return a===o-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return U(this.pattern,this.options)}parse(e,n){$(e);const s=this.options;if(e==="**")if(s.noglobstar)e="*";else return w;if(e==="")return"";let t="",a=!1,i=!1;const o=[],l=[];let p,f=!1,d=-1,m=-1,y,u,S,x=e.charAt(0)===".",W=s.dot||x;const q=()=>x?"":W?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",P=c=>c.charAt(0)==="."?"":s.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",j=()=>{if(p){switch(p){case"*":t+=_,a=!0;break;case"?":t+=N,a=!0;break;default:t+="\\"+p;break}this.debug("clearStateChar %j %j",p,t),p=!1}};for(let c=0,h;c<e.length&&(h=e.charAt(c));c++){if(this.debug("%s	%s %s %j",e,c,t,h),i){if(h==="/")return!1;G[h]&&(t+="\\"),t+=h,i=!1;continue}switch(h){case"/":return!1;case"\\":if(f&&e.charAt(c+1)==="-"){t+=h;continue}j(),i=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,c,t,h),f){this.debug("  in class"),h==="!"&&c===m+1&&(h="^"),t+=h;continue}this.debug("call clearStateChar %j",p),j(),p=h,s.noext&&j();continue;case"(":{if(f){t+="(";continue}if(!p){t+="\\(";continue}const g={type:p,start:c-1,reStart:t.length,open:D[p].open,close:D[p].close};this.debug(this.pattern,"	",g),o.push(g),t+=g.open,g.start===0&&g.type!=="!"&&(x=!0,t+=P(e.slice(c+1))),this.debug("plType %j %j",p,t),p=!1;continue}case")":{const g=o[o.length-1];if(f||!g){t+="\\)";continue}o.pop(),j(),a=!0,u=g,t+=u.close,u.type==="!"&&l.push(Object.assign(u,{reEnd:t.length}));continue}case"|":{const g=o[o.length-1];if(f||!g){t+="\\|";continue}j(),t+="|",g.start===0&&g.type!=="!"&&(x=!0,t+=P(e.slice(c+1)));continue}case"[":if(j(),f){t+="\\"+h;continue}f=!0,m=c,d=t.length,t+=h;continue;case"]":if(c===m+1||!f){t+="\\"+h;continue}y=e.substring(m+1,c);try{RegExp("["+ce(oe(y))+"]"),t+=h}catch{t=t.substring(0,d)+"(?:$.)"}a=!0,f=!1;continue;default:j(),G[h]&&!(h==="^"&&f)&&(t+="\\"),t+=h;break}}for(f&&(y=e.slice(m+1),S=this.parse(y,M),t=t.substring(0,d)+"\\["+S[0],a=a||S[1]),u=o.pop();u;u=o.pop()){let c;c=t.slice(u.reStart+u.open.length),this.debug("setting tail",t,u),c=c.replace(/((?:\\{2}){0,64})(\\?)\|/g,(g,k,E)=>(E||(E="\\"),k+k+E+"|")),this.debug(`tail=%j
   %s`,c,c,u,t);const h=u.type==="*"?_:u.type==="?"?N:"\\"+u.type;a=!0,t=t.slice(0,u.reStart)+h+"\\("+c}j(),i&&(t+="\\\\");const z=ne[t.charAt(0)];for(let c=l.length-1;c>-1;c--){const h=l[c],g=t.slice(0,h.reStart),k=t.slice(h.reStart,h.reEnd-8);let E=t.slice(h.reEnd);const Q=t.slice(h.reEnd-8,h.reEnd)+E,V=g.split(")").length,X=g.split("(").length-V;let v=E;for(let C=0;C<X;C++)v=v.replace(/\)[+*?]?/,"");E=v;const Y=E===""&&n!==M?"(?:$|\\/)":"";t=g+k+E+Y+Q}if(t!==""&&a&&(t="(?=.)"+t),z&&(t=q()+t),n===M)return[t,a];if(s.nocase&&!a&&(a=e.toUpperCase()!==e.toLowerCase()),!a)return ie(e);const H=s.nocase?"i":"";try{return Object.assign(new RegExp("^"+t+"$",H),{_glob:e,_src:t})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const n=this.options,s=n.noglobstar?_:n.dot?se:re,t=n.nocase?"i":"";let a=e.map(i=>(i=i.map(o=>typeof o=="string"?he(o):o===w?w:o._src).reduce((o,l)=>(o[o.length-1]===w&&l===w||o.push(l),o),[]),i.forEach((o,l)=>{o!==w||i[l-1]===w||(l===0?i.length>1?i[l+1]="(?:\\/|"+s+"\\/)?"+i[l+1]:i[l]=s:l===i.length-1?i[l-1]+="(?:\\/|"+s+")?":(i[l-1]+="(?:\\/|\\/"+s+"\\/)"+i[l+1],i[l+1]=w))}),i.filter(o=>o!==w).join("/"))).join("|");a="^(?:"+a+")$",this.negate&&(a="^(?!"+a+").*$");try{this.regexp=new RegExp(a,t)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;const s=this.options;R.sep!=="/"&&(e=e.split(R.sep).join("/")),e=e.split(I),this.debug(this.pattern,"split",e);const t=this.set;this.debug(this.pattern,"set",t);let a;for(let i=e.length-1;i>=0&&(a=e[i],!a);i--);for(let i=0;i<t.length;i++){const o=t[i];let l=e;if(s.matchBase&&o.length===1&&(l=[a]),this.matchOne(l,o,n))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(e){return b.defaults(e).Minimatch}}b.Minimatch=A;var le=T(L);export{le as default};
