import u from"../strip-ansi@7.1.2/index.js";import{eastAsianWidth as a}from"../get-east-asian-width@1.4.0/index.js";import c from"../emoji-regex@10.6.0/index.js";const m=new Intl.Segmenter,g=new RegExp("^\\p{Default_Ignorable_Code_Point}$","u");function l(t,s={}){if(typeof t!="string"||t.length===0)return 0;const{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:i=!1}=s;if(i||(t=u(t)),t.length===0)return 0;let n=0;const f={ambiguousAsWide:!r};for(const{segment:o}of m.segment(t)){const e=o.codePointAt(0);if(!(e<=31||e>=127&&e<=159)&&!(e>=8203&&e<=8207||e===65279)&&!(e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071)&&!(e>=55296&&e<=57343)&&!(e>=65024&&e<=65039)&&!g.test(o)){if(c().test(o)){n+=2;continue}n+=a(e,f)}}return n}export{l as default};
