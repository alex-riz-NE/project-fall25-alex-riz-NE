var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const l={},{defineProperty:y,getOwnPropertyDescriptor:h,ownKeys:_}=Reflect,{apply:Pt,bind:tt,call:_t}=Function.prototype,O=tt.bind(_t);l.uncurryThis=O;const I=tt.bind(Pt);l.applyBind=I;const T=["ArrayOf","ArrayPrototypePush","ArrayPrototypeUnshift","MathHypot","MathMax","MathMin","StringPrototypeConcat","TypedArrayOf"];function x(t){return typeof t=="symbol"?`Symbol${t.description[7].toUpperCase()}${t.description.slice(8)}`:`${t[0].toUpperCase()}${t.slice(1)}`}function j(t,e,o,{enumerable:n,get:s,set:r}){y(t,`${e}Get${o}`,{value:O(s),enumerable:n}),r!==void 0&&y(t,`${e}Set${o}`,{value:O(r),enumerable:n})}function et(t,e,o){for(const n of _(t)){const s=x(n),r=h(t,n);if("get"in r)j(e,o,s,r);else{const a=`${o}${s}`;y(e,a,r),T.includes(a)&&y(e,`${a}Apply`,{value:I(r.value,t)})}}}function mt(t,e,o){for(const n of _(t)){const s=x(n),r=h(t,n);if("get"in r)j(e,o,s,r);else{const{value:a}=r;typeof a=="function"&&(r.value=a.bind(t));const u=`${o}${s}`;y(e,u,r),T.includes(u)&&y(e,`${u}Apply`,{value:I(a,t)})}}}function N(t,e,o){for(const n of _(t)){const s=x(n),r=h(t,n);if("get"in r)j(e,o,s,r);else{const{value:a}=r;typeof a=="function"&&(r.value=O(a));const u=`${o}${s}`;y(e,u,r),T.includes(u)&&y(e,`${u}Apply`,{value:I(a)})}}}["Proxy","globalThis"].forEach(t=>{l[t]=globalThis[t]}),[decodeURI,decodeURIComponent,encodeURI,encodeURIComponent].forEach(t=>{l[t.name]=t}),["JSON","Math","Proxy","Reflect"].forEach(t=>{et(k[t],l,t)}),["Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int16Array","Int32Array","Int8Array","Map","Number","Object","RangeError","ReferenceError","RegExp","Set","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet"].forEach(t=>{const e=k[t];l[t]=e,et(e,l,t),N(e.prototype,l,`${t}Prototype`)}),["Promise"].forEach(t=>{const e=k[t];l[t]=e,mt(e,l,t),N(e.prototype,l,`${t}Prototype`)}),[{name:"TypedArray",original:Reflect.getPrototypeOf(Uint8Array)},{name:"ArrayIterator",original:{prototype:Reflect.getPrototypeOf(Array.prototype[Symbol.iterator]())}},{name:"StringIterator",original:{prototype:Reflect.getPrototypeOf(String.prototype[Symbol.iterator]())}}].forEach(({name:t,original:e})=>{l[t]=e,N(e,l,t),N(e.prototype,l,`${t}Prototype`)});const{ArrayPrototypeForEach:ot,FunctionPrototypeCall:Et,Map:nt,ObjectFreeze:m,ObjectSetPrototypeOf:G,Set:rt,SymbolIterator:D,WeakMap:at,WeakSet:it}=l,C=(t,e)=>{class o{constructor(s){this._iterator=t(s)}next(){return e(this._iterator)}[D](){return this}}return G(o.prototype,null),m(o.prototype),m(o),o};l.SafeArrayIterator=C(l.ArrayPrototypeSymbolIterator,l.ArrayIteratorPrototypeNext),l.SafeStringIterator=C(l.StringPrototypeSymbolIterator,l.StringIteratorPrototypeNext);const st=(t,e)=>{ot(_(t),o=>{h(e,o)||y(e,o,h(t,o))})},E=(t,e)=>{if(D in t.prototype){const o=new t;let n;ot(_(t.prototype),s=>{if(!h(e.prototype,s)){const r=h(t.prototype,s);if(typeof r.value=="function"&&r.value.length===0&&D in(Et(r.value,o)??{})){const a=O(r.value);n=n??O(a(o).next);const u=C(a,n);r.value=function(){return new u(this)}}y(e.prototype,s,r)}})}else st(t.prototype,e.prototype);return st(t,e),G(e.prototype,null),m(e.prototype),m(e),e};l.makeSafe=E,l.SafeMap=E(nt,class extends nt{constructor(t){super(t)}}),l.SafeWeakMap=E(at,class extends at{constructor(t){super(t)}}),l.SafeSet=E(rt,class extends rt{constructor(t){super(t)}}),l.SafeWeakSet=E(it,class extends it{constructor(t){super(t)}}),G(l,null),m(l);var R=l;S(R);let Rt=class extends TypeError{constructor(e,o,n){super(`${e} must be ${o} got ${n}`),this.code="ERR_INVALID_ARG_TYPE"}},vt=class extends TypeError{constructor(e,o,n){super(`The property ${e} ${n}. Received '${o}'`),this.code="ERR_INVALID_ARG_VALUE"}},wt=class extends Error{constructor(e){super(e),this.code="ERR_PARSE_ARGS_INVALID_OPTION_VALUE"}},bt=class extends Error{constructor(e,o){const n=o?`. To specify a positional argument starting with a '-', place it at the end of the command after '--', as in '-- ${JSON.stringify(e)}`:"";super(`Unknown option '${e}'${n}`),this.code="ERR_PARSE_ARGS_UNKNOWN_OPTION"}},It=class extends Error{constructor(e){super(`Unexpected argument '${e}'. This command does not take positional arguments`),this.code="ERR_PARSE_ARGS_UNEXPECTED_POSITIONAL"}};var F={codes:{ERR_INVALID_ARG_TYPE:Rt,ERR_INVALID_ARG_VALUE:vt,ERR_PARSE_ARGS_INVALID_OPTION_VALUE:wt,ERR_PARSE_ARGS_UNKNOWN_OPTION:bt,ERR_PARSE_ARGS_UNEXPECTED_POSITIONAL:It}};S(F);const{ArrayIsArray:lt,ArrayPrototypeIncludes:Nt,ArrayPrototypeJoin:Vt}=R,{codes:{ERR_INVALID_ARG_TYPE:v}}=F;function pt(t,e){if(typeof t!="string")throw new v(e,"String",t)}function Lt(t,e,o){if(!Nt(o,t))throw new v(e,`('${Vt(o,"|")}')`,t)}function ct(t,e){if(typeof t!="boolean")throw new v(e,"Boolean",t)}function M(t,e){if(!lt(t))throw new v(e,"Array",t)}function Ut(t,e){M(t,e);for(let o=0;o<t.length;o++)pt(t[o],`${e}[${o}]`)}function kt(t,e){M(t,e);for(let o=0;o<t.length;o++)ct(t[o],`${e}[${o}]`)}function Tt(t,e,o){const n=o==null,s=n?!1:o.allowArray,r=n?!1:o.allowFunction;if(!(!n&&o.nullable)&&t===null||!s&&lt(t)||typeof t!="object"&&(!r||typeof t!="function"))throw new v(e,"Object",t)}var B={validateArray:M,validateObject:Tt,validateString:pt,validateStringArray:Ut,validateUnion:Lt,validateBoolean:ct,validateBooleanArray:kt};S(B);const{ObjectCreate:xt,ObjectFreeze:jt}=R,Gt=jt(xt(null));var ut={kEmptyObject:Gt};S(ut);const{ArrayPrototypeFind:Dt,ObjectEntries:Ct,ObjectPrototypeHasOwnProperty:yt,StringPrototypeCharAt:$,StringPrototypeIncludes:ft,StringPrototypeStartsWith:$t}=R,{validateObject:dt}=B;function V(t,e){if(yt(t,e))return t[e]}function W(t,e,o){if(yt(t,e))return V(t[e],o)}function Ft(t){return t!=null}function Mt(t){return t==null?!1:t.length>1&&$(t,0)==="-"}function Bt(t){return t.length===2&&$(t,0)==="-"&&$(t,1)!=="-"}function Wt(t){return t.length>2&&$t(t,"--")&&!ft(t,"=",3)}function Xt(t){return t.length>2&&$t(t,"--")&&ft(t,"=",3)}function Yt(t,e){if(t.length<=2||$(t,0)!=="-"||$(t,1)==="-")return!1;const o=$(t,1),n=X(o,e);return W(e,n,"type")!=="string"}function Kt(t,e){if(dt(e,"options"),t.length<=2||$(t,0)!=="-"||$(t,1)==="-")return!1;const o=$(t,1),n=X(o,e);return W(e,n,"type")==="string"}function X(t,e){return dt(e,"options"),Dt(Ct(e),({1:o})=>V(o,"short")===t)?.[0]??t}function Ht(t,e,o){return V(e,"default")!==void 0&&o[t]===void 0}var At={findLongOptionForShort:X,isLoneLongOption:Wt,isLoneShortOption:Bt,isLongOptionAndValue:Xt,isOptionValue:Ft,isOptionLikeValue:Mt,isShortOptionAndValue:Kt,isShortOptionGroup:Yt,useDefaultValueOption:Ht,objectGetOwn:V,optionsGetOwn:W};S(At);const{ArrayPrototypeForEach:Y,ArrayPrototypeIncludes:L,ArrayPrototypeMap:Jt,ArrayPrototypePush:f,ArrayPrototypePushApply:Zt,ArrayPrototypeShift:K,ArrayPrototypeSlice:H,ArrayPrototypeUnshiftApply:zt,ObjectEntries:gt,ObjectPrototypeHasOwnProperty:J,StringPrototypeCharAt:Z,StringPrototypeIndexOf:qt,StringPrototypeSlice:w,StringPrototypeStartsWith:Qt}=R,{validateArray:te,validateBoolean:b,validateBooleanArray:ee,validateObject:ht,validateString:St,validateStringArray:oe,validateUnion:ne}=B,{kEmptyObject:re}=ut,{findLongOptionForShort:z,isLoneLongOption:ae,isLoneShortOption:ie,isLongOptionAndValue:se,isOptionValue:Ot,isOptionLikeValue:le,isShortOptionAndValue:pe,isShortOptionGroup:ce,useDefaultValueOption:ue,objectGetOwn:d,optionsGetOwn:P}=At,{codes:{ERR_INVALID_ARG_VALUE:ye,ERR_PARSE_ARGS_INVALID_OPTION_VALUE:q,ERR_PARSE_ARGS_UNKNOWN_OPTION:fe,ERR_PARSE_ARGS_UNEXPECTED_POSITIONAL:$e}}=F;function de(){const t=process.execArgv;return L(t,"-e")||L(t,"--eval")||L(t,"-p")||L(t,"--print")?H(process.argv,1):H(process.argv,2)}function Ae(t){if(!t.inlineValue&&le(t.value)){const e=Qt(t.rawName,"--")?`'${t.rawName}=-XYZ'`:`'--${t.name}=-XYZ' or '${t.rawName}-XYZ'`,o=`Option '${t.rawName}' argument is ambiguous.
Did you forget to specify the option argument for '${t.rawName}'?
To specify an option argument starting with a dash use ${e}.`;throw new q(o)}}function ge(t,e){if(!J(t.options,e.name))throw new fe(e.rawName,t.allowPositionals);const o=P(t.options,e.name,"short"),n=`${o?`-${o}, `:""}--${e.name}`,s=P(t.options,e.name,"type");if(s==="string"&&typeof e.value!="string")throw new q(`Option '${n} <value>' argument missing`);if(s==="boolean"&&e.value!=null)throw new q(`Option '${n}' does not take an argument`)}function he(t,e,o,n){if(t==="__proto__")return;const s=e??!0;P(o,t,"multiple")?n[t]?f(n[t],s):n[t]=[s]:n[t]=s}function Se(t,e,o){t!=="__proto__"&&(o[t]=e)}function Oe(t,e){const o=[];let n=-1,s=0;const r=H(t);for(;r.length>0;){const a=K(r),u=r[0];if(s>0?s--:n++,a==="--"){f(o,{kind:"option-terminator",index:n}),Zt(o,Jt(r,p=>({kind:"positional",index:++n,value:p})));break}if(ie(a)){const p=Z(a,1),i=z(p,e);let c,A;P(e,i,"type")==="string"&&Ot(u)&&(c=K(r),A=!1),f(o,{kind:"option",name:i,rawName:a,index:n,value:c,inlineValue:A}),c!=null&&++n;continue}if(ce(a,e)){const p=[];for(let i=1;i<a.length;i++){const c=Z(a,i),A=z(c,e);if(P(e,A,"type")!=="string"||i===a.length-1)f(p,`-${c}`);else{f(p,`-${w(a,i)}`);break}}zt(r,p),s=p.length;continue}if(pe(a,e)){const p=Z(a,1),i=z(p,e),c=w(a,2);f(o,{kind:"option",name:i,rawName:`-${p}`,index:n,value:c,inlineValue:!0});continue}if(ae(a)){const p=w(a,2);let i,c;P(e,p,"type")==="string"&&Ot(u)&&(i=K(r),c=!1),f(o,{kind:"option",name:p,rawName:a,index:n,value:i,inlineValue:c}),i!=null&&++n;continue}if(se(a)){const p=qt(a,"="),i=w(a,2,p),c=w(a,p+1);f(o,{kind:"option",name:i,rawName:`--${i}`,index:n,value:c,inlineValue:!0});continue}f(o,{kind:"positional",index:n,value:a})}return o}const Pe=(t=re)=>{const e=d(t,"args")??de(),o=d(t,"strict")??!0,n=d(t,"allowPositionals")??!o,s=d(t,"tokens")??!1,r=d(t,"options")??{__proto__:null},a={options:r,allowPositionals:n};te(e,"args"),b(o,"strict"),b(n,"allowPositionals"),b(s,"tokens"),ht(r,"options"),Y(gt(r),({0:i,1:c})=>{ht(c,`options.${i}`);const A=d(c,"type");if(ne(A,`options.${i}.type`,["string","boolean"]),J(c,"short")){const g=c.short;if(St(g,`options.${i}.short`),g.length!==1)throw new ye(`options.${i}.short`,g,"must be a single character")}const U=d(c,"multiple");J(c,"multiple")&&b(U,`options.${i}.multiple`);const Q=d(c,"default");if(Q!==void 0){let g;switch(A){case"string":g=U?oe:St;break;case"boolean":g=U?ee:b;break}g(Q,`options.${i}.default`)}});const u=Oe(e,r),p={values:{__proto__:null},positionals:[]};return s&&(p.tokens=u),Y(u,i=>{if(i.kind==="option")o&&(ge(a,i),Ae(i)),he(i.name,i.value,r,p.values);else if(i.kind==="positional"){if(!n)throw new $e(i.value);f(p.positionals,i.value)}}),Y(gt(r),({0:i,1:c})=>{ue(i,c,p.values)&&Se(i,d(c,"default"),p.values)}),p};var _e={parseArgs:Pe},me=S(_e);export{me as default};
