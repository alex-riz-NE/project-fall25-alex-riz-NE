function h(t,e,r){throw new Error(r?`No known conditions for "${e}" specifier in "${t}" package`:`Missing "${e}" specifier in "${t}" package`)}function b(t,e,r,n){let i,u,s=g(t,r),y=function(f){let l=new Set(["default",...f.conditions||[]]);return f.unsafe||l.add(f.require?"require":"import"),f.unsafe||l.add(f.browser?"browser":"node"),l}(n||{}),c=e[s];if(c===void 0){let f,l,a,o;for(o in e)l&&o.length<l.length||(o[o.length-1]==="/"&&s.startsWith(o)?(u=s.substring(o.length),l=o):o.length>1&&(a=o.indexOf("*",1),~a&&(f=RegExp("^"+o.substring(0,a)+"(.*)"+o.substring(1+a)+"$").exec(s),f&&f[1]&&(u=f[1],l=o))));c=e[l]}return c||h(t,s),i=p(c,y),i||h(t,s,1),u&&function(f,l){let a,o=0,x=f.length,d=/[*]/g,$=/[/]$/;for(;o<x;o++)f[o]=d.test(a=f[o])?a.replace(d,l):$.test(a)?a+l:a}(i,u),i}function g(t,e,r){if(t===e||e===".")return".";let n=t+"/",i=n.length,u=e.slice(0,i)===n,s=u?e.slice(i):e;return s[0]==="#"?s:u||!r?s.slice(0,2)==="./"?s:"./"+s:s}function p(t,e,r){if(t){if(typeof t=="string")return r&&r.add(t),[t];let n,i;if(Array.isArray(t)){for(i=r||new Set,n=0;n<t.length;n++)p(t[n],e,i);if(!r&&i.size)return[...i]}else for(n in t)if(e.has(n))return p(t[n],e,r)}}function k(t,e={}){let r,n=0,i=e.browser,u=e.fields||["module","main"],s=typeof i=="string";for(i&&!u.includes("browser")&&(u.unshift("browser"),s&&(i=g(t.name,i,!0)));n<u.length;n++)if(r=t[u[n]]){if(typeof r!="string"){if(typeof r!="object"||u[n]!="browser")continue;if(s&&(r=r[i],r==null))return i}return typeof r=="string"?"./"+r.replace(/^\.?\//,""):r}}function w(t,e,r){let n,i=t.exports;if(i){if(typeof i=="string")i={".":i};else for(n in i){n[0]!=="."&&(i={".":i});break}return b(t.name,i,e||".",r)}}function m(t,e,r){if(t.imports)return b(t.name,t.imports,e,r)}function q(t,e,r){return(e=g(t.name,e||"."))[0]==="#"?m(t,e,r):w(t,e,r)}export{w as exports,m as imports,k as legacy,q as resolve};
