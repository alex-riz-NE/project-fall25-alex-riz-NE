let u=null,I=class o{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return o.createItem(t)}allocateCursor(t,r){let n;return u!==null?(n=u,u=u.cursor,n.prev=t,n.next=r,n.cursor=this.cursor):n={prev:t,next:r,cursor:this.cursor},this.cursor=n,n}releaseCursor(){const{cursor:t}=this;this.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=u,u=t}updateCursors(t,r,n,s){let{cursor:l}=this;for(;l!==null;)l.prev===t&&(l.prev=r),l.next===n&&(l.next=s),l=l.cursor}*[Symbol.iterator](){for(let t=this.head;t!==null;t=t.next)yield t.data}get size(){let t=0;for(let r=this.head;r!==null;r=r.next)t++;return t}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let r=null;this.head=null;for(let n of t){const s=o.createItem(n);r!==null?r.next=s:this.head=s,s.prev=r,r=s}return this.tail=r,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,r=this){const n=this.allocateCursor(null,this.head);for(;n.next!==null;){const s=n.next;n.next=s.next,t.call(r,s.data,s,this)}this.releaseCursor()}forEachRight(t,r=this){const n=this.allocateCursor(this.tail,null);for(;n.prev!==null;){const s=n.prev;n.prev=s.prev,t.call(r,s.data,s,this)}this.releaseCursor()}reduce(t,r,n=this){let s=this.allocateCursor(null,this.head),l=r,i;for(;s.next!==null;)i=s.next,s.next=i.next,l=t.call(n,l,i.data,i,this);return this.releaseCursor(),l}reduceRight(t,r,n=this){let s=this.allocateCursor(this.tail,null),l=r,i;for(;s.prev!==null;)i=s.prev,s.prev=i.prev,l=t.call(n,l,i.data,i,this);return this.releaseCursor(),l}some(t,r=this){for(let n=this.head;n!==null;n=n.next)if(t.call(r,n.data,n,this))return!0;return!1}map(t,r=this){const n=new o;for(let s=this.head;s!==null;s=s.next)n.appendData(t.call(r,s.data,s,this));return n}filter(t,r=this){const n=new o;for(let s=this.head;s!==null;s=s.next)t.call(r,s.data,s,this)&&n.appendData(s.data);return n}nextUntil(t,r,n=this){if(t===null)return;const s=this.allocateCursor(null,t);for(;s.next!==null;){const l=s.next;if(s.next=l.next,r.call(n,l.data,l,this))break}this.releaseCursor()}prevUntil(t,r,n=this){if(t===null)return;const s=this.allocateCursor(t,null);for(;s.prev!==null;){const l=s.prev;if(s.prev=l.prev,r.call(n,l.data,l,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new o;for(let r of this)t.appendData(r);return t}prepend(t){return this.updateCursors(null,t,this.head,t),this.head!==null?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(o.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(o.createItem(t))}insert(t,r=null){if(r!==null)if(this.updateCursors(r.prev,t,r,t),r.prev===null){if(this.head!==r)throw new Error("before doesn't belong to list");this.head=t,r.prev=t,t.next=r,this.updateCursors(null,t)}else r.prev.next=t,t.prev=r.prev,r.prev=t,t.next=r;else this.updateCursors(this.tail,t,null,t),this.tail!==null?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,r){return this.insert(o.createItem(t),r)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),t.prev!==null)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(t.next!==null)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(o.createItem(t))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(t){this.prepend(o.createItem(t))}shift(){return this.head!==null?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,r){return t.head===null?this:(r!=null?(this.updateCursors(r.prev,t.tail,r,t.head),r.prev!==null?(r.prev.next=t.head,t.head.prev=r.prev):this.head=t.head,r.prev=t.tail,t.tail.next=r):(this.updateCursors(this.tail,t.tail,null,t.head),this.tail!==null?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null,this)}replace(t,r){"head"in r?this.insertList(r,t):this.insert(r,t),this.remove(t)}};function x(e){const t={};for(const r in e){let n=e[r];n&&(Array.isArray(n)||n instanceof I?n=n.map(x):n.constructor===Object&&(n=x(n))),t[r]=n}return t}function g(e){return e>=48&&e<=57}function d(e){return g(e)||e>=65&&e<=70||e>=97&&e<=102}function M(e){return e>=65&&e<=90}function P(e){return e>=97&&e<=122}function _(e){return M(e)||P(e)}function N(e){return e>=128}function L(e){return _(e)||N(e)||e===95}function R(e){return L(e)||g(e)||e===45}function U(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function S(e){return e===10||e===13||e===12}function f(e){return S(e)||e===32||e===9}function A(e,t){return!(e!==92||S(t)||t===0)}const O=new Array(128),B=128,H=130,J=131,T=132,q=133;for(let e=0;e<O.length;e++)O[e]=f(e)&&H||g(e)&&J||L(e)&&T||U(e)&&q||e||B;function p(e,t){return t<e.length?e.charCodeAt(t):0}function G(e,t,r){return r===13&&p(e,t+1)===10?2:1}function m(e,t){if(t+=2,d(p(e,t-1))){for(const n=Math.min(e.length,t+5);t<n&&d(p(e,t));t++);const r=p(e,t);f(r)&&(t+=G(e,t,r))}return t}function b(e){if(e.length===1&&!d(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}const k=92;function K(e){const t=e.length-1;let r="";for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s===k){if(n===t)break;if(s=e.charCodeAt(++n),A(k,s)){const l=n-1,i=m(e,l);n=i-1,r+=b(e.substring(l+1,i))}else s===13&&e.charCodeAt(n+1)===10&&n++}else r+=e[n]}return r}function Q(e){let t="";if(e.length===1&&e.charCodeAt(0)===45)return"\\-";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(n===0){t+="\uFFFD";continue}if(n<=31||n===127||n>=48&&n<=57&&(r===0||r===1&&e.charCodeAt(0)===45)){t+="\\"+n.toString(16)+" ";continue}R(n)?t+=e.charAt(r):t+="\\"+e.charAt(r)}return t}var V=Object.freeze({__proto__:null,decode:K,encode:Q});const v=new Map,h=new Map,C=45,W=Z,X=tt,Y=w;function $(e,t){return t=t||0,e.length-t>=2&&e.charCodeAt(t)===C&&e.charCodeAt(t+1)===C}function w(e,t){if(t=t||0,e.length-t>=3&&e.charCodeAt(t)===C&&e.charCodeAt(t+1)!==C){const r=e.indexOf("-",t+2);if(r!==-1)return e.substring(t,r+1)}return""}function Z(e){if(v.has(e))return v.get(e);const t=e.toLowerCase();let r=v.get(t);if(r===void 0){const n=$(t,0),s=n?"":w(t,0);r=Object.freeze({basename:t.substr(s.length),name:t,prefix:s,vendor:s,custom:n})}return v.set(e,r),r}function tt(e){if(h.has(e))return h.get(e);let t=e,r=e[0];r==="/"?r=e[1]==="/"?"//":"/":r!=="_"&&r!=="*"&&r!=="$"&&r!=="#"&&r!=="+"&&r!=="&"&&(r="");const n=$(t,r.length);if(!n&&(t=t.toLowerCase(),h.has(t))){const a=h.get(t);return h.set(e,a),a}const s=n?"":w(t,r.length),l=t.substr(0,r.length+s.length),i=Object.freeze({basename:t.substr(l.length),name:t.substr(r.length),hack:r,vendor:s,prefix:l,custom:n});return h.set(e,i),i}const y=92,E=34,j=39;function et(e){const t=e.length,r=e.charCodeAt(0),n=r===E||r===j?1:0,s=n===1&&t>1&&e.charCodeAt(t-1)===r?t-2:t-1;let l="";for(let i=n;i<=s;i++){let a=e.charCodeAt(i);if(a===y){if(i===s){i!==t-1&&(l=e.substr(i+1));break}if(a=e.charCodeAt(++i),A(y,a)){const c=i-1,F=m(e,c);i=F-1,l+=b(e.substring(c+1,F))}else a===13&&e.charCodeAt(i+1)===10&&i++}else l+=e[i]}return l}function rt(e,t){const r=t?"'":'"',n=t?j:E;let s="",l=!1;for(let i=0;i<e.length;i++){const a=e.charCodeAt(i);if(a===0){s+="\uFFFD";continue}if(a<=31||a===127){s+="\\"+a.toString(16),l=!0;continue}a===n||a===y?(s+="\\"+e.charAt(i),l=!1):(l&&(d(a)||f(a))&&(s+=" "),s+=e.charAt(i),l=!1)}return r+s+r}var nt=Object.freeze({__proto__:null,decode:et,encode:rt});const st=32,D=92,lt=34,it=39,at=40,z=41;function ot(e){const t=e.length;let r=4,n=e.charCodeAt(t-1)===z?t-2:t-1,s="";for(;r<n&&f(e.charCodeAt(r));)r++;for(;r<n&&f(e.charCodeAt(n));)n--;for(let l=r;l<=n;l++){let i=e.charCodeAt(l);if(i===D){if(l===n){l!==t-1&&(s=e.substr(l+1));break}if(i=e.charCodeAt(++l),A(D,i)){const a=l-1,c=m(e,a);l=c-1,s+=b(e.substring(a+1,c))}else i===13&&e.charCodeAt(l+1)===10&&l++}else s+=e[l]}return s}function ut(e){let t="",r=!1;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(s===0){t+="\uFFFD";continue}if(s<=31||s===127){t+="\\"+s.toString(16),r=!0;continue}s===st||s===D||s===lt||s===it||s===at||s===z?(t+="\\"+e.charAt(n),r=!1):(r&&d(s)&&(t+=" "),t+=e.charAt(n),r=!1)}return"url("+t+")"}var ht=Object.freeze({__proto__:null,decode:ot,encode:ut});export{I as List,x as clone,V as ident,$ as isCustomProperty,W as keyword,X as property,nt as string,ht as url,Y as vendorPrefix};
