const Z=0,ee=1,te=2,se=3,ne=4,re=5,oe=6,ae=7,ie=8,ce=9,he=10,ue=11,fe=12,le=13,ke=14,de=15,$e=16,Ce=17,ge=18,me=19,pe=20,be=21,ye=22,Ae=23,Se=24,Te=25;var xe=Object.freeze({__proto__:null,AtKeyword:3,BadString:6,BadUrl:8,CDC:15,CDO:14,Colon:16,Comma:18,Comment:25,Delim:9,Dimension:12,EOF:0,Function:2,Hash:4,Ident:1,LeftCurlyBracket:23,LeftParenthesis:21,LeftSquareBracket:19,Number:10,Percentage:11,RightCurlyBracket:24,RightParenthesis:22,RightSquareBracket:20,Semicolon:17,String:5,Url:7,WhiteSpace:13});function l(e){return e>=48&&e<=57}function D(e){return l(e)||e>=65&&e<=70||e>=97&&e<=102}function O(e){return e>=65&&e<=90}function v(e){return e>=97&&e<=122}function H(e){return O(e)||v(e)}function z(e){return e>=128}function p(e){return H(e)||z(e)||e===95}function U(e){return p(e)||l(e)||e===45}function K(e){return e>=0&&e<=8||e===11||e>=14&&e<=31||e===127}function b(e){return e===10||e===13||e===12}function y(e){return b(e)||e===32||e===9}function $(e,t){return!(e!==92||b(t)||t===0)}function B(e,t,n){return e===45?p(t)||t===45||$(t,n):p(e)?!0:e===92?$(e,t):!1}function L(e,t,n){return e===43||e===45?l(t)?2:t===46&&l(n)?3:0:e===46?l(t)?2:0:l(e)?1:0}function F(e){return e===65279||e===65534?1:0}const W=new Array(128),V=128,A=130,q=131,E=132,M=133;for(let e=0;e<W.length;e++)W[e]=y(e)&&A||l(e)&&q||p(e)&&E||K(e)&&M||e||V;function I(e){return e<128?W[e]:E}function m(e,t){return t<e.length?e.charCodeAt(t):0}function N(e,t,n){return n===13&&m(e,t+1)===10?2:1}function j(e,t,n){let r=e.charCodeAt(t);return O(r)&&(r=r|32),r===n}function _(e,t,n,r){if(n-t!==r.length||t<0||n>e.length)return!1;for(let i=t;i<n;i++){const a=r.charCodeAt(i-t);let c=e.charCodeAt(i);if(O(c)&&(c=c|32),c!==a)return!1}return!0}function De(e,t){for(;t>=0&&y(e.charCodeAt(t));t--);return t+1}function S(e,t){for(;t<e.length&&y(e.charCodeAt(t));t++);return t}function w(e,t){for(;t<e.length&&l(e.charCodeAt(t));t++);return t}function T(e,t){if(t+=2,D(m(e,t-1))){for(const r=Math.min(e.length,t+5);t<r&&D(m(e,t));t++);const n=m(e,t);y(n)&&(t+=N(e,t,n))}return t}function x(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(!U(n)){if($(n,m(e,t+1))){t=T(e,t)-1;continue}break}}return t}function G(e,t){let n=e.charCodeAt(t);if((n===43||n===45)&&(n=e.charCodeAt(t+=1)),l(n)&&(t=w(e,t+1),n=e.charCodeAt(t)),n===46&&l(e.charCodeAt(t+1))&&(t+=2,t=w(e,t)),j(e,t,101)){let r=0;n=e.charCodeAt(t+1),(n===45||n===43)&&(r=1,n=e.charCodeAt(t+2)),l(n)&&(t=w(e,t+1+r+1))}return t}function P(e,t){for(;t<e.length;t++){const n=e.charCodeAt(t);if(n===41){t++;break}$(n,m(e,t+1))&&(t=T(e,t))}return t}function Oe(e){if(e.length===1&&!D(e.charCodeAt(0)))return e[0];let t=parseInt(e,16);return(t===0||t>=55296&&t<=57343||t>1114111)&&(t=65533),String.fromCodePoint(t)}var J=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"];function R(e=null,t){return e===null||e.length<t?new Uint32Array(Math.max(t+1024,16384)):e}const Q=10,Be=12,X=13;function Y(e){const t=e.source,n=t.length,r=t.length>0?F(t.charCodeAt(0)):0,i=R(e.lines,n),a=R(e.columns,n);let c=e.startLine,f=e.startColumn;for(let h=r;h<n;h++){const s=t.charCodeAt(h);i[h]=c,a[h]=f++,(s===Q||s===X||s===Be)&&(s===X&&h+1<n&&t.charCodeAt(h+1)===Q&&(h++,i[h]=c,a[h]=f),c++,f=1)}i[n]=c,a[n]=f,e.lines=i,e.columns=a,e.computed=!0}class Le{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(t,n=0,r=1,i=1){this.source=t,this.startOffset=n,this.startLine=r,this.startColumn=i,this.computed=!1}getLocation(t,n){return this.computed||Y(this),{source:n,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,n,r){return this.computed||Y(this),{source:r,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+n,line:this.lines[n],column:this.columns[n]}}}}const k=16777215,C=24,Ee=new Map([[2,22],[21,22],[19,20],[23,24]]);class Ie{constructor(t,n){this.setSource(t,n)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",n=()=>{}){t=String(t||"");const r=t.length,i=R(this.offsetAndType,t.length+1),a=R(this.balance,t.length+1);let c=0,f=0,h=0,s=-1;for(this.offsetAndType=null,this.balance=null,n(t,(o,u,g)=>{switch(o){default:a[c]=r;break;case f:{let d=h&k;for(h=a[d],f=h>>C,a[c]=d,a[d++]=c;d<c;d++)a[d]===r&&(a[d]=c);break}case 21:case 2:case 19:case 23:a[c]=h,f=Ee.get(o),h=f<<C|c;break}i[c++]=o<<C|g,s===-1&&(s=u)}),i[c]=0<<C|r,a[c]=r,a[r]=r;h!==0;){const o=h&k;h=a[o],a[o]=r}this.source=t,this.firstCharOffset=s===-1?0:s,this.tokenCount=c,this.offsetAndType=i,this.balance=a,this.reset(),this.next()}lookupType(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t]>>C:0}lookupOffset(t){return t+=this.tokenIndex,t<this.tokenCount?this.offsetAndType[t-1]&k:this.source.length}lookupValue(t,n){return t+=this.tokenIndex,t<this.tokenCount?_(this.source,this.offsetAndType[t-1]&k,this.offsetAndType[t]&k,n):!1}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?this.offsetAndType[t-1]&k:this.offsetAndType[this.tokenCount]&k:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,n){return n?this.lookupType(n)===9&&this.source.charCodeAt(this.lookupOffset(n))===t:this.tokenType===9&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let n=this.tokenIndex+t;n<this.tokenCount?(this.tokenIndex=n,this.tokenStart=this.offsetAndType[n-1]&k,n=this.offsetAndType[n],this.tokenType=n>>C,this.tokenEnd=n&k):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>C,this.tokenEnd=t&k):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=0,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===13||this.tokenType===25;)this.next()}skipUntilBalanced(t,n){let r=t,i,a;e:for(;r<this.tokenCount;r++){if(i=this.balance[r],i<t)break e;switch(a=r>0?this.offsetAndType[r-1]&k:this.firstCharOffset,n(this.source.charCodeAt(a))){case 1:break e;case 2:r++;break e;default:this.balance[i]===r&&(r=i)}}this.skip(r-this.tokenIndex)}forEachToken(t){for(let n=0,r=this.firstCharOffset;n<this.tokenCount;n++){const i=r,a=this.offsetAndType[n],c=a&k,f=a>>C;r=c,t(f,i,c,n)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((n,r,i,a)=>{t[a]={idx:a,type:J[n],chunk:this.source.substring(r,i),balance:this.balance[a]}}),t}}function Ne(e,t){function n(u){return u<f?e.charCodeAt(u):0}function r(){if(s=G(e,s),B(n(s),n(s+1),n(s+2))){o=12,s=x(e,s);return}if(n(s)===37){o=11,s++;return}o=10}function i(){const u=s;if(s=x(e,s),_(e,u,s,"url")&&n(s)===40){if(s=S(e,s+1),n(s)===34||n(s)===39){o=2,s=u+4;return}c();return}if(n(s)===40){o=2,s++;return}o=1}function a(u){for(u||(u=n(s++)),o=5;s<e.length;s++){const g=e.charCodeAt(s);switch(I(g)){case u:s++;return;case A:if(b(g)){s+=N(e,s,g),o=6;return}break;case 92:if(s===e.length-1)break;const d=n(s+1);b(d)?s+=N(e,s+1,d):$(g,d)&&(s=T(e,s)-1);break}}}function c(){for(o=7,s=S(e,s);s<e.length;s++){const u=e.charCodeAt(s);switch(I(u)){case 41:s++;return;case A:if(s=S(e,s),n(s)===41||s>=e.length){s<e.length&&s++;return}s=P(e,s),o=8;return;case 34:case 39:case 40:case M:s=P(e,s),o=8;return;case 92:if($(u,n(s+1))){s=T(e,s)-1;break}s=P(e,s),o=8;return}}}e=String(e||"");const f=e.length;let h=F(n(0)),s=h,o;for(;s<f;){const u=e.charCodeAt(s);switch(I(u)){case A:o=13,s=S(e,s+1);break;case 34:a();break;case 35:U(n(s+1))||$(n(s+1),n(s+2))?(o=4,s=x(e,s+1)):(o=9,s++);break;case 39:a();break;case 40:o=21,s++;break;case 41:o=22,s++;break;case 43:L(u,n(s+1),n(s+2))?r():(o=9,s++);break;case 44:o=18,s++;break;case 45:L(u,n(s+1),n(s+2))?r():n(s+1)===45&&n(s+2)===62?(o=15,s=s+3):B(u,n(s+1),n(s+2))?i():(o=9,s++);break;case 46:L(u,n(s+1),n(s+2))?r():(o=9,s++);break;case 47:n(s+1)===42?(o=25,s=e.indexOf("*/",s+2),s=s===-1?e.length:s+2):(o=9,s++);break;case 58:o=16,s++;break;case 59:o=17,s++;break;case 60:n(s+1)===33&&n(s+2)===45&&n(s+3)===45?(o=14,s=s+4):(o=9,s++);break;case 64:B(n(s+1),n(s+2),n(s+3))?(o=3,s=x(e,s+1)):(o=9,s++);break;case 91:o=19,s++;break;case 92:$(u,n(s+1))?i():(o=9,s++);break;case 93:o=20,s++;break;case 123:o=23,s++;break;case 125:o=24,s++;break;case q:r();break;case E:i();break;default:o=9,s++}t(o,h,h=s)}}export{se as AtKeyword,oe as BadString,ie as BadUrl,de as CDC,ke as CDO,$e as Colon,ge as Comma,Te as Comment,ce as Delim,q as DigitCategory,fe as Dimension,Z as EOF,V as EofCategory,te as Function,ne as Hash,ee as Ident,Ae as LeftCurlyBracket,be as LeftParenthesis,me as LeftSquareBracket,E as NameStartCategory,M as NonPrintableCategory,he as Number,Le as OffsetToLocation,ue as Percentage,Se as RightCurlyBracket,ye as RightParenthesis,pe as RightSquareBracket,Ce as Semicolon,re as String,Ie as TokenStream,ae as Url,le as WhiteSpace,A as WhiteSpaceCategory,I as charCodeCategory,j as cmpChar,_ as cmpStr,P as consumeBadUrlRemnants,T as consumeEscaped,x as consumeName,G as consumeNumber,Oe as decodeEscaped,w as findDecimalNumberEnd,S as findWhiteSpaceEnd,De as findWhiteSpaceStart,N as getNewlineLength,F as isBOM,l as isDigit,D as isHexDigit,B as isIdentifierStart,H as isLetter,v as isLowercaseLetter,U as isName,p as isNameStart,b as isNewline,z as isNonAscii,K as isNonPrintable,L as isNumberStart,O as isUppercaseLetter,$ as isValidEscape,y as isWhiteSpace,J as tokenNames,xe as tokenTypes,Ne as tokenize};
