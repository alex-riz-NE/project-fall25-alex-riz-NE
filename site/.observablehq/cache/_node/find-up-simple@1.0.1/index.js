import p from"node:process";import m from"node:fs/promises";import{fileURLToPath as y}from"node:url";import d from"node:fs";import t from"node:path";const f=i=>i instanceof URL?y(i):i;async function u(i,{cwd:a=p.cwd(),type:e="file",stopAt:r}={}){let o=t.resolve(f(a)??"");const{root:s}=t.parse(o);r=t.resolve(o,f(r??s));const l=t.isAbsolute(i);for(;o;){const c=l?i:t.join(o,i);try{const n=await m.stat(c);if(e==="file"&&n.isFile()||e==="directory"&&n.isDirectory())return c}catch{}if(o===r||o===s)break;o=t.dirname(o)}}function w(i,{cwd:a=p.cwd(),type:e="file",stopAt:r}={}){let o=t.resolve(f(a)??"");const{root:s}=t.parse(o);r=t.resolve(o,f(r)??s);const l=t.isAbsolute(i);for(;o;){const c=l?i:t.join(o,i);try{const n=d.statSync(c,{throwIfNoEntry:!1});if(e==="file"&&n?.isFile()||e==="directory"&&n?.isDirectory())return c}catch{}if(o===r||o===s)break;o=t.dirname(o)}}export{u as findUp,w as findUpSync};
