import d from"node:path";import ie from"node:fs";import Se from"node:module";import{resolveExports as Oe}from"../resolve-pkg-maps@1.0.0/index.js";import je from"fs";import De from"os";import Fe from"path";var $e=Object.defineProperty,a=(e,r)=>$e(e,"name",{value:r,configurable:!0});function A(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}a(A,"slash");const J=a(e=>{const r=ie[e];return(n,...t)=>{const o=`${e}:${t.join(":")}`;let s=n?.get(o);return s===void 0&&(s=Reflect.apply(r,ie,t),n?.set(o,s)),s}},"cacheFs"),S=J("existsSync"),Ie=J("readFileSync"),U=J("statSync"),le=a((e,r,n)=>{for(;;){const t=d.posix.join(e,r);if(S(n,t))return t;const o=d.dirname(e);if(o===e)return;e=o}},"findUp"),K=/^\.{1,2}(\/.*)?$/,z=a(e=>{const r=A(e);return K.test(r)?r:`./${r}`},"normalizeRelativePath");function ce(e,r=!1){const n=e.length;let t=0,o="",s=0,i=16,l=0,u=0,f=0,v=0,k=0;function w(c,x){let y=0,m=0;for(;y<c;){let p=e.charCodeAt(t);if(p>=48&&p<=57)m=m*16+p-48;else if(p>=65&&p<=70)m=m*16+p-65+10;else if(p>=97&&p<=102)m=m*16+p-97+10;else break;t++,y++}return y<c&&(m=-1),m}a(w,"scanHexDigits");function C(c){t=c,o="",s=0,i=16,k=0}a(C,"setPosition");function h(){let c=t;if(e.charCodeAt(t)===48)t++;else for(t++;t<e.length&&F(e.charCodeAt(t));)t++;if(t<e.length&&e.charCodeAt(t)===46)if(t++,t<e.length&&F(e.charCodeAt(t)))for(t++;t<e.length&&F(e.charCodeAt(t));)t++;else return k=3,e.substring(c,t);let x=t;if(t<e.length&&(e.charCodeAt(t)===69||e.charCodeAt(t)===101))if(t++,(t<e.length&&e.charCodeAt(t)===43||e.charCodeAt(t)===45)&&t++,t<e.length&&F(e.charCodeAt(t))){for(t++;t<e.length&&F(e.charCodeAt(t));)t++;x=t}else k=3;return e.substring(c,x)}a(h,"scanNumber");function b(){let c="",x=t;for(;;){if(t>=n){c+=e.substring(x,t),k=2;break}const y=e.charCodeAt(t);if(y===34){c+=e.substring(x,t),t++;break}if(y===92){if(c+=e.substring(x,t),t++,t>=n){k=2;break}switch(e.charCodeAt(t++)){case 34:c+='"';break;case 92:c+="\\";break;case 47:c+="/";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+=`
`;break;case 114:c+="\r";break;case 116:c+="	";break;case 117:const m=w(4);m>=0?c+=String.fromCharCode(m):k=4;break;default:k=5}x=t;continue}if(y>=0&&y<=31)if($(y)){c+=e.substring(x,t),k=2;break}else k=6;t++}return c}a(b,"scanString");function E(){if(o="",k=0,s=t,u=l,v=f,t>=n)return s=n,i=17;let c=e.charCodeAt(t);if(L(c)){do t++,o+=String.fromCharCode(c),c=e.charCodeAt(t);while(L(c));return i=15}if($(c))return t++,o+=String.fromCharCode(c),c===13&&e.charCodeAt(t)===10&&(t++,o+=`
`),l++,f=t,i=14;switch(c){case 123:return t++,i=1;case 125:return t++,i=2;case 91:return t++,i=3;case 93:return t++,i=4;case 58:return t++,i=6;case 44:return t++,i=5;case 34:return t++,o=b(),i=10;case 47:const x=t-1;if(e.charCodeAt(t+1)===47){for(t+=2;t<n&&!$(e.charCodeAt(t));)t++;return o=e.substring(x,t),i=12}if(e.charCodeAt(t+1)===42){t+=2;const y=n-1;let m=!1;for(;t<y;){const p=e.charCodeAt(t);if(p===42&&e.charCodeAt(t+1)===47){t+=2,m=!0;break}t++,$(p)&&(p===13&&e.charCodeAt(t)===10&&t++,l++,f=t)}return m||(t++,k=1),o=e.substring(x,t),i=13}return o+=String.fromCharCode(c),t++,i=16;case 45:if(o+=String.fromCharCode(c),t++,t===n||!F(e.charCodeAt(t)))return i=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=h(),i=11;default:for(;t<n&&O(c);)t++,c=e.charCodeAt(t);if(s!==t){switch(o=e.substring(s,t),o){case"true":return i=8;case"false":return i=9;case"null":return i=7}return i=16}return o+=String.fromCharCode(c),t++,i=16}}a(E,"scanNext");function O(c){if(L(c)||$(c))return!1;switch(c){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}a(O,"isUnknownContentCharacter");function j(){let c;do c=E();while(c>=12&&c<=15);return c}return a(j,"scanNextNonTrivia"),{setPosition:C,getPosition:a(()=>t,"getPosition"),scan:r?j:E,getToken:a(()=>i,"getToken"),getTokenValue:a(()=>o,"getTokenValue"),getTokenOffset:a(()=>s,"getTokenOffset"),getTokenLength:a(()=>t-s,"getTokenLength"),getTokenStartLine:a(()=>u,"getTokenStartLine"),getTokenStartCharacter:a(()=>s-v,"getTokenStartCharacter"),getTokenError:a(()=>k,"getTokenError")}}a(ce,"createScanner");function L(e){return e===32||e===9}a(L,"isWhiteSpace");function $(e){return e===10||e===13}a($,"isLineBreak");function F(e){return e>=48&&e<=57}a(F,"isDigit");var ue;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(ue||(ue={})),new Array(20).fill(0).map((e,r)=>" ".repeat(r));const I=200;new Array(I).fill(0).map((e,r)=>`
`+" ".repeat(r)),new Array(I).fill(0).map((e,r)=>"\r"+" ".repeat(r)),new Array(I).fill(0).map((e,r)=>`\r
`+" ".repeat(r)),new Array(I).fill(0).map((e,r)=>`
`+"	".repeat(r)),new Array(I).fill(0).map((e,r)=>"\r"+"	".repeat(r)),new Array(I).fill(0).map((e,r)=>`\r
`+"	".repeat(r));var _;(function(e){e.DEFAULT={allowTrailingComma:!1}})(_||(_={}));function fe(e,r=[],n=_.DEFAULT){let t=null,o=[];const s=[];function i(l){Array.isArray(o)?o.push(l):t!==null&&(o[t]=l)}return a(i,"onValue"),pe(e,{onObjectBegin:a(()=>{const l={};i(l),s.push(o),o=l,t=null},"onObjectBegin"),onObjectProperty:a(l=>{t=l},"onObjectProperty"),onObjectEnd:a(()=>{o=s.pop()},"onObjectEnd"),onArrayBegin:a(()=>{const l=[];i(l),s.push(o),o=l,t=null},"onArrayBegin"),onArrayEnd:a(()=>{o=s.pop()},"onArrayEnd"),onLiteralValue:i,onError:a((l,u,f)=>{r.push({error:l,offset:u,length:f})},"onError")},n),o[0]}a(fe,"parse$1");function pe(e,r,n=_.DEFAULT){const t=ce(e,!1),o=[];let s=0;function i(g){return g?()=>s===0&&g(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}a(i,"toNoArgVisit");function l(g){return g?T=>s===0&&g(T,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}a(l,"toOneArgVisit");function u(g){return g?T=>s===0&&g(T,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>o.slice()):()=>!0}a(u,"toOneArgVisitWithPath");function f(g){return g?()=>{s>0?s++:g(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>o.slice())===!1&&(s=1)}:()=>!0}a(f,"toBeginVisit");function v(g){return g?()=>{s>0&&s--,s===0&&g(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter())}:()=>!0}a(v,"toEndVisit");const k=f(r.onObjectBegin),w=u(r.onObjectProperty),C=v(r.onObjectEnd),h=f(r.onArrayBegin),b=v(r.onArrayEnd),E=u(r.onLiteralValue),O=l(r.onSeparator),j=i(r.onComment),c=l(r.onError),x=n&&n.disallowComments,y=n&&n.allowTrailingComma;function m(){for(;;){const g=t.scan();switch(t.getTokenError()){case 4:p(14);break;case 5:p(15);break;case 3:p(13);break;case 1:x||p(11);break;case 2:p(12);break;case 6:p(16);break}switch(g){case 12:case 13:x?p(10):j();break;case 16:p(1);break;case 15:case 14:break;default:return g}}}a(m,"scanNext");function p(g,T=[],ae=[]){if(c(g),T.length+ae.length>0){let P=t.getToken();for(;P!==17;){if(T.indexOf(P)!==-1){m();break}else if(ae.indexOf(P)!==-1)break;P=m()}}}a(p,"handleError");function V(g){const T=t.getTokenValue();return g?E(T):(w(T),o.push(T)),m(),!0}a(V,"parseString");function re(){switch(t.getToken()){case 11:const g=t.getTokenValue();let T=Number(g);isNaN(T)&&(p(2),T=0),E(T);break;case 7:E(null);break;case 8:E(!0);break;case 9:E(!1);break;default:return!1}return m(),!0}a(re,"parseLiteral");function ne(){return t.getToken()!==10?(p(3,[],[2,5]),!1):(V(!1),t.getToken()===6?(O(":"),m(),B()||p(4,[],[2,5])):p(5,[],[2,5]),o.pop(),!0)}a(ne,"parseProperty");function oe(){k(),m();let g=!1;for(;t.getToken()!==2&&t.getToken()!==17;){if(t.getToken()===5){if(g||p(4,[],[]),O(","),m(),t.getToken()===2&&y)break}else g&&p(6,[],[]);ne()||p(4,[],[2,5]),g=!0}return C(),t.getToken()!==2?p(7,[2],[]):m(),!0}a(oe,"parseObject");function se(){h(),m();let g=!0,T=!1;for(;t.getToken()!==4&&t.getToken()!==17;){if(t.getToken()===5){if(T||p(4,[],[]),O(","),m(),t.getToken()===4&&y)break}else T&&p(6,[],[]);g?(o.push(0),g=!1):o[o.length-1]++,B()||p(4,[],[4,5]),T=!0}return b(),g||o.pop(),t.getToken()!==4?p(8,[4],[]):m(),!0}a(se,"parseArray");function B(){switch(t.getToken()){case 3:return se();case 1:return oe();case 10:return V(!0);default:return re()}}return a(B,"parseValue"),m(),t.getToken()===17?n.allowEmptyContent?!0:(p(4,[],[]),!1):B()?(t.getToken()!==17&&p(9,[],[]),!0):(p(4,[],[]),!1)}a(pe,"visit");var de;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(de||(de={}));var ge;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(ge||(ge={}));const Be=fe;var he;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(he||(he={}));const me=a((e,r)=>Be(Ie(r,e,"utf8")),"readJsonc"),q=Symbol("implicitBaseUrl"),D="${configDir}",Pe=a(()=>{const{findPnpApi:e}=Se;return e&&e(process.cwd())},"getPnpApi"),Q=a((e,r,n,t)=>{const o=`resolveFromPackageJsonPath:${e}:${r}:${n}`;if(t!=null&&t.has(o))return t.get(o);const s=me(e,t);if(!s)return;let i=r||"tsconfig.json";if(!n&&s.exports)try{const[l]=Oe(s.exports,r,["require","types"]);i=l}catch{return!1}else!r&&s.tsconfig&&(i=s.tsconfig);return i=d.join(e,"..",i),t?.set(o,i),i},"resolveFromPackageJsonPath"),H="package.json",G="tsconfig.json",Ue=a((e,r,n)=>{let t=e;if(e===".."&&(t=d.join(t,G)),e[0]==="."&&(t=d.resolve(r,t)),d.isAbsolute(t)){if(S(n,t)){if(U(n,t).isFile())return t}else if(!t.endsWith(".json")){const C=`${t}.json`;if(S(n,C))return C}return}const[o,...s]=e.split("/"),i=o[0]==="@"?`${o}/${s.shift()}`:o,l=s.join("/"),u=Pe();if(u){const{resolveRequest:C}=u;try{if(i===e){const h=C(d.join(i,H),r);if(h){const b=Q(h,l,!1,n);if(b&&S(n,b))return b}}else{let h;try{h=C(e,r,{extensions:[".json"]})}catch{h=C(d.join(e,G),r)}if(h)return h}}catch{}}const f=le(d.resolve(r),d.join("node_modules",i),n);if(!f||!U(n,f).isDirectory())return;const v=d.join(f,H);if(S(n,v)){const C=Q(v,l,!1,n);if(C===!1)return;if(C&&S(n,C)&&U(n,C).isFile())return C}const k=d.join(f,l),w=k.endsWith(".json");if(!w){const C=`${k}.json`;if(S(n,C))return C}if(S(n,k)){if(U(n,k).isDirectory()){const C=d.join(k,H);if(S(n,C)){const b=Q(C,"",!0,n);if(b&&S(n,b))return b}const h=d.join(k,G);if(S(n,h))return h}else if(w)return k}},"resolveExtendsPath"),X=a((e,r)=>z(d.relative(e,r)),"pathRelative"),ke=["files","include","exclude"],Ce=a((e,r,n)=>{const t=d.join(r,n),o=d.relative(e,t);return A(o)||"./"},"resolveAndRelativize"),Le=a((e,r,n)=>{const t=d.relative(e,r);if(!t)return n;const o=n.startsWith("./")?n.slice(2):n;return A(`${t}/${o}`)},"prefixPattern"),_e=a((e,r,n,t)=>{const o=Ue(e,r,t);if(!o)throw new Error(`File '${e}' not found.`);if(n.has(o))throw new Error(`Circularity detected while resolving configuration: ${o}`);n.add(o);const s=d.dirname(o),i=be(o,t,n);delete i.references;const{compilerOptions:l}=i;if(l){const{baseUrl:u}=l;u&&!u.startsWith(D)&&(l.baseUrl=Ce(r,s,u));const{outDir:f}=l;f&&!f.startsWith(D)&&(l.outDir=Ce(r,s,f))}for(const u of ke){const f=i[u];f&&(i[u]=f.map(v=>v.startsWith(D)?v:Le(r,s,v)))}return i},"resolveExtends"),Ne=["outDir","declarationDir"],be=a((e,r,n=new Set)=>{let t;try{t=me(e,r)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}if(typeof t!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);const o=d.dirname(e);if(t.compilerOptions){const{compilerOptions:s}=t;s.paths&&!s.baseUrl&&(s[q]=o)}if(t.extends){const s=Array.isArray(t.extends)?t.extends:[t.extends];delete t.extends;for(const i of s.reverse()){const l=_e(i,o,new Set(n),r),u={...l,...t,compilerOptions:{...l.compilerOptions,...t.compilerOptions}};l.watchOptions&&(u.watchOptions={...l.watchOptions,...t.watchOptions}),t=u}}if(t.compilerOptions){const{compilerOptions:s}=t,i=["baseUrl","rootDir"];for(const l of i){const u=s[l];if(u&&!u.startsWith(D)){const f=d.resolve(o,u),v=X(o,f);s[l]=v}}for(const l of Ne){let u=s[l];u&&(Array.isArray(t.exclude)||(t.exclude=[]),t.exclude.includes(u)||t.exclude.push(u),u.startsWith(D)||(u=z(u)),s[l]=u)}}else t.compilerOptions={};if(t.include?(t.include=t.include.map(A),t.files&&delete t.files):t.files&&(t.files=t.files.map(s=>s.startsWith(D)?s:z(s))),t.watchOptions){const{watchOptions:s}=t;s.excludeDirectories&&(s.excludeDirectories=s.excludeDirectories.map(i=>A(d.resolve(o,i))))}return t},"_parseTsconfig"),N=a((e,r)=>{if(e.startsWith(D))return A(d.join(r,e.slice(D.length)))},"interpolateConfigDir"),Re=["outDir","declarationDir","outFile","rootDir","baseUrl","tsBuildInfoFile"],We=a(e=>{if(e.strict){const r=["noImplicitAny","noImplicitThis","strictNullChecks","strictFunctionTypes","strictBindCallApply","strictPropertyInitialization","strictBuiltinIteratorReturn","alwaysStrict","useUnknownInCatchVariables"];for(const n of r)e[n]===void 0&&(e[n]=!0)}if(e.target){let r=e.target.toLowerCase();r==="es2015"&&(r="es6"),e.target=r,r==="esnext"&&(e.module!=null||(e.module="es6"),e.useDefineForClassFields!=null||(e.useDefineForClassFields=!0)),(r==="es6"||r==="es2016"||r==="es2017"||r==="es2018"||r==="es2019"||r==="es2020"||r==="es2021"||r==="es2022"||r==="es2023"||r==="es2024")&&(e.module!=null||(e.module="es6")),(r==="es2022"||r==="es2023"||r==="es2024")&&(e.useDefineForClassFields!=null||(e.useDefineForClassFields=!0))}if(e.module){let r=e.module.toLowerCase();r==="es2015"&&(r="es6"),e.module=r,(r==="es6"||r==="es2020"||r==="es2022"||r==="esnext"||r==="none"||r==="system"||r==="umd"||r==="amd")&&(e.moduleResolution!=null||(e.moduleResolution="classic")),r==="system"&&(e.allowSyntheticDefaultImports!=null||(e.allowSyntheticDefaultImports=!0)),(r==="node16"||r==="nodenext"||r==="preserve")&&(e.esModuleInterop!=null||(e.esModuleInterop=!0),e.allowSyntheticDefaultImports!=null||(e.allowSyntheticDefaultImports=!0)),(r==="node16"||r==="nodenext")&&(e.moduleDetection!=null||(e.moduleDetection="force"),e.useDefineForClassFields!=null||(e.useDefineForClassFields=!0)),r==="node16"&&(e.target!=null||(e.target="es2022"),e.moduleResolution!=null||(e.moduleResolution="node16")),r==="nodenext"&&(e.target!=null||(e.target="esnext"),e.moduleResolution!=null||(e.moduleResolution="nodenext")),r==="preserve"&&(e.moduleResolution!=null||(e.moduleResolution="bundler"))}if(e.moduleResolution){let r=e.moduleResolution.toLowerCase();r==="node"&&(r="node10"),e.moduleResolution=r,(r==="node16"||r==="nodenext"||r==="bundler")&&(e.resolvePackageJsonExports!=null||(e.resolvePackageJsonExports=!0),e.resolvePackageJsonImports!=null||(e.resolvePackageJsonImports=!0)),r==="bundler"&&(e.allowSyntheticDefaultImports!=null||(e.allowSyntheticDefaultImports=!0),e.resolveJsonModule!=null||(e.resolveJsonModule=!0))}e.esModuleInterop&&(e.allowSyntheticDefaultImports!=null||(e.allowSyntheticDefaultImports=!0)),e.verbatimModuleSyntax&&(e.isolatedModules!=null||(e.isolatedModules=!0),e.preserveConstEnums!=null||(e.preserveConstEnums=!0)),e.isolatedModules&&(e.preserveConstEnums!=null||(e.preserveConstEnums=!0)),e.rewriteRelativeImportExtensions&&(e.allowImportingTsExtensions!=null||(e.allowImportingTsExtensions=!0))},"normalizeCompilerOptions"),ve=a((e,r=new Map)=>{const n=d.resolve(e),t=be(n,r),o=d.dirname(n),{compilerOptions:s}=t;if(s){for(const l of Re){const u=s[l];if(u){const f=N(u,o);s[l]=f?X(o,f):u}}for(const l of["rootDirs","typeRoots"]){const u=s[l];u&&(s[l]=u.map(f=>{const v=N(f,o);return v?X(o,v):f}))}const{paths:i}=s;if(i)for(const l of Object.keys(i))i[l]=i[l].map(u=>{var f;return(f=N(u,o))!=null?f:u});We(s)}for(const i of ke){const l=t[i];l&&(t[i]=l.map(u=>{var f;return(f=N(u,o))!=null?f:u}))}return t},"parseTsconfig"),Me=a((e=process.cwd(),r="tsconfig.json",n=new Map)=>{const t=le(A(e),r,n);if(!t)return null;const o=ve(t,n);return{path:t,config:o}},"getTsconfig"),Ve=/\*/g,we=a((e,r)=>{const n=e.match(Ve);if(n&&n.length>1)throw new Error(r)},"assertStarCount"),Je=a(e=>{if(e.includes("*")){const[r,n]=e.split("*");return{prefix:r,suffix:n}}return e},"parsePattern"),Ke=a(({prefix:e,suffix:r},n)=>n.startsWith(e)&&n.endsWith(r),"isPatternMatch"),ze=a((e,r,n)=>Object.entries(e).map(([t,o])=>(we(t,`Pattern '${t}' can have at most one '*' character.`),{pattern:Je(t),substitutions:o.map(s=>{if(we(s,`Substitution '${s}' in pattern '${t}' can have at most one '*' character.`),!r&&!K.test(s))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return d.resolve(n,s)})})),"parsePaths"),qe=a(e=>{const{compilerOptions:r}=e.config;if(!r)return null;const{baseUrl:n,paths:t}=r;if(!n&&!t)return null;const o=q in r&&r[q],s=d.resolve(d.dirname(e.path),n||o||"."),i=t?ze(t,n,s):[];return l=>{if(K.test(l))return[];const u=[];for(const w of i){if(w.pattern===l)return w.substitutions.map(A);typeof w.pattern!="string"&&u.push(w)}let f,v=-1;for(const w of u)Ke(w.pattern,l)&&w.pattern.prefix.length>v&&(v=w.pattern.prefix.length,f=w);if(!f)return n?[A(d.join(s,l))]:[];const k=l.slice(f.pattern.prefix.length,l.length-f.pattern.suffix.length);return f.substitutions.map(w=>A(w.replace("*",k)))}},"createPathsMatcher");var Qe=Object.defineProperty,R=a((e,r)=>Qe(e,"name",{value:r,configurable:!0}),"s");const Te=R(e=>{let r="";for(let n=0;n<e.length;n+=1){const t=e[n],o=t.toUpperCase();r+=t===o?t.toLowerCase():o}return r},"invertCase"),Y=new Map,xe=R((e,r)=>{const n=Fe.join(e,`.is-fs-case-sensitive-test-${process.pid}`);try{return r.writeFileSync(n,""),!r.existsSync(Te(n))}finally{try{r.unlinkSync(n)}catch{}}},"checkDirectoryCaseWithWrite"),He=R((e,r,n)=>{try{return xe(e,n)}catch(t){if(r===void 0)return xe(De.tmpdir(),n);throw t}},"checkDirectoryCaseWithFallback"),Ge=R((e,r=je,n=!0)=>{const t=e??process.cwd();if(n&&Y.has(t))return Y.get(t);let o;const s=Te(t);return s!==t&&r.existsSync(t)?o=!r.existsSync(s):o=He(t,e,r),n&&Y.set(t,o),o},"isFsCaseSensitive"),{join:W}=d.posix,Z={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},Xe=a(e=>{const r=[...Z.ts],n=[...Z.cts],t=[...Z.mts];return e!=null&&e.allowJs&&(r.push(".js",".jsx"),n.push(".cjs"),t.push(".mjs")),[...r,...n,...t]},"getSupportedExtensions"),Ye=a(e=>{const r=[];if(!e)return r;const{outDir:n,declarationDir:t}=e;return n&&r.push(n),t&&r.push(t),r},"getDefaultExcludeSpec"),ye=a(e=>e.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`),"escapeForRegexp"),Ze=["node_modules","bower_components","jspm_packages"],ee=`(?!(${Ze.join("|")})(/|$))`,et=/(?:^|\/)[^.*?]+$/,Ee="**/*",M="[^/]",te="[^./]",Ae=process.platform==="win32",tt=a(({config:e,path:r},n=Ge())=>{if("extends"in e)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!d.isAbsolute(r))throw new Error("The tsconfig path must be absolute");Ae&&(r=A(r));const t=d.dirname(r),{files:o,include:s,exclude:i,compilerOptions:l}=e,u=o?.map(h=>W(t,h)),f=Xe(l),v=n?"":"i",k=(i||Ye(l)).map(h=>{const b=W(t,h),E=ye(b).replaceAll(String.raw`\*\*/`,"(.+/)?").replaceAll(String.raw`\*`,`${M}*`).replaceAll(String.raw`\?`,M);return new RegExp(`^${E}($|/)`,v)}),w=o||s?s:[Ee],C=w?w.map(h=>{let b=W(t,h);et.test(b)&&(b=W(b,Ee));const E=ye(b).replaceAll(String.raw`/\*\*`,`(/${ee}${te}${M}*)*?`).replaceAll(/(\/)?\\\*/g,(O,j)=>{const c=`(${te}|(\\.(?!min\\.js$))?)*`;return j?`/${ee}${te}${c}`:c}).replaceAll(/(\/)?\\\?/g,(O,j)=>{const c=M;return j?`/${ee}${c}`:c});return new RegExp(`^${E}$`,v)}):void 0;return h=>{if(!d.isAbsolute(h))throw new Error("filePath must be absolute");if(Ae&&(h=A(h)),u!=null&&u.includes(h)||!(!f.some(b=>h.endsWith(b))||k.some(b=>b.test(h)))&&C&&C.some(b=>b.test(h)))return e}},"createFilesMatcher");export{tt as createFilesMatcher,qe as createPathsMatcher,Me as getTsconfig,ve as parseTsconfig};
