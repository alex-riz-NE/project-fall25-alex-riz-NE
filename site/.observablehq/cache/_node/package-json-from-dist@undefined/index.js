import{readFileSync as u}from"node:fs";import{dirname as j,sep as t,resolve as a}from"node:path";import{fileURLToPath as k}from"node:url";const g=`${t}node_modules${t}`,l=`.store${t}`,p=`${t}package${t}`,m=`${t}dist${t}`,f=(s,r="../package.json")=>{const d=typeof s=="object"||s.startsWith("file://")?k(s):s,e=j(d),i=e.lastIndexOf(g);if(i!==-1){const o=e.substring(0,i+g.length),n=e.substring(i+g.length);if(n.startsWith(l)){const c=n.indexOf(p,l.length);if(c)return a(o,n.substring(0,c+p.length),"package.json")}const h=n.startsWith("@")?n.split(t,2).join(t):String(n.split(t)[0]);return a(o,h,"package.json")}else{const o=e.lastIndexOf(m);return o!==-1?a(e.substring(0,o),"package.json"):a(e,r)}},$=(s,r="../package.json")=>JSON.parse(u(f(s,r),"utf8"));export{f as findPackageJson,$ as loadPackageJson};
