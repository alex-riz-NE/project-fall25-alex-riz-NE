import p from"../../escape-string-regexp@5.0.0/index.js";import $ from"../transliterate@1.6.0/index.js";const i=[["&"," and "],["\u{1F984}"," unicorn "],["\u2665"," love "]];var g=i;const u=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),d=(e,r)=>{const t=p(r);return e.replace(new RegExp(`${t}{2,}`,"g"),r).replace(new RegExp(`^${t}|${t}$`,"g"),"")},f=e=>{let r="a-z\\d";if(r+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const t of e.preserveCharacters){if(t===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);r+=p(t)}return new RegExp(`[^${r}]+`,"g")};function l(e,r){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);r={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...r};const t=r.preserveLeadingUnderscore&&e.startsWith("_"),s=r.preserveTrailingDash&&e.endsWith("-"),a=new Map([...g,...r.customReplacements]);e=$(e,{customReplacements:a}),r.decamelize&&(e=u(e));const o=f(r);return r.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(o,r.separator),e=e.replace(/\\/g,""),r.separator&&(e=d(e,r.separator)),t&&(e=`_${e}`),s&&(e=`${e}-`),e}function h(){const e=new Map,r=(t,s)=>{if(t=l(t,s),!t)return"";const a=t.toLowerCase(),o=e.get(a.replace(/(?:-\d+?)+?$/,""))||0,c=e.get(a);e.set(a,typeof c=="number"?c+1:1);const n=e.get(a)||2;return(n>=2||o>2)&&(t=`${t}-${n}`),t};return r.reset=()=>{e.clear()},r}export{l as default,h as slugifyWithCounter};
